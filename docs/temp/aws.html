<meta name="viewport" content="width=device-width, initial-scale=1.0" />


<h1>0611
</h1>

<script>
//alert("alert1");
let add = async(e)=>{
  let server=input.value;
  console.log('input.value');
  console.log(input.value);
  let messageJson={
    "message":"addServer"
    ,"server":server
  }
  var vvv={"servers":"vvv"};

  //input.value='https://m1o8k1oaeh.execute-api.us-east-1.amazonaws.com/alpha/';
  let vv1=await fetch(getit.value,{
    method:"POST"
    ,headers:{
      "Content-Type":"application/json;chartset=utf-8"
    }
    ,body:JSON.stringify(messageJson)
  })
    //.then(response => {console.log(response.body);response.json()})
    vvv=await vv1.json();
    //console.log(vv2);
    for (x in vvv.servers){

    if (x.match(/^http+/) && !(x.match(/local/))){
      console.log('link to each server')
      console.log(x);
      let v1=await fetch(x,{
    method:"POST"
    ,headers:{
      "Content-Type":"application/json;chartset=utf-8"
    }
    ,body:JSON.stringify(messageJson)
  })

  let v2= await v1.json();

  console.log('v2');
  console.log(v2);

    //.then(response => {console.log(response.body);response.json()})
    //vvv=await v1.json();
    //console.log(vvv);

    }

    }
    //console.log(vvv);
    let keys=Object.keys(vvv.servers);
    //console.log(keys);
    let sorted=keys.sort();
    let list1='';
    for (x in sorted){
      list1+=sorted[x]+'<br>'
    }
    output.innerHTML=list1;
}
</script>

<script>
//console.log("trace1");
//fetch('/api/hello')
//  .then(response => response.json())
//  .then(data => alert(data.a));
// ( async()=>{
//let  res1= await fetch("/api/hello");
//let result=await res1.json;

  
  
//console.log(result.a);
//alert(result.a);
//})();

//https://m1o8k1oaeh.execute-api.us-east-1.amazonaws.com/alpha/
</script>

getit<input type="text" id="getit" value='https://m1o8k1oaeh.execute-api.us-east-1.amazonaws.com/alpha/'>
<br><br><br><br>
<input type="text" id="input" >
<button type="button" onclick="add();">add</button>
<div id="output"></div>
